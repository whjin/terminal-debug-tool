(function(e){function t(t){for(var s,o,n=t[0],r=t[1],c=t[2],d=0,m=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&m.push(l[o][0]),l[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);p&&p(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,n=1;n<a.length;n++){var r=a[n];0!==l[r]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},l={app:0},i=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var p=r;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1e14":function(e,t,a){},"372a":function(e,t,a){"use strict";a("1e14")},"4ee2":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("1f37"),l=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("DebugTool")],1)},i=[],o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"debug-tool-container"},[t("div",{staticClass:"debug-tool-wrapper"},[t("div",{staticClass:"debug-tool-header"},[t("label",[e._v("服务器IP：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.serverIp,expression:"serverIp"}],attrs:{type:"text",placeholder:"请输入服务器IP"},domProps:{value:e.serverIp},on:{input:function(t){t.target.composing||(e.serverIp=t.target.value)}}}),t("label",[e._v("端口：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.port,expression:"port"}],attrs:{type:"text",placeholder:"请输入端口号"},domProps:{value:e.port},on:{input:function(t){t.target.composing||(e.port=t.target.value)}}}),t("button",{on:{click:e.handleTestApi}},[e._v("测试接口")]),t("button",{on:{click:e.toggleTestFace}},[e._v("测试人脸接口")]),t("button",{on:{click:e.getAppVersion}},[e._v("获取服务器APP版本号")]),t("span",{staticClass:"app-version"},[e._v(e._s(e.appVersion))])]),t("div",{staticClass:"debug-tool-main"},[e.showFaceTest?t("div",{staticClass:"debug-tool-face"},[t("div",{staticClass:"face-container"},[t("div",{staticClass:"face-police"},[e.policeFaceState?t("div",{staticClass:"face-box"},[t("img",{staticClass:"face-image",attrs:{src:e.policeFaceUrl,title:"民警人脸照片",alt:"民警人脸照片"}}),t("img",{staticClass:"face-delete",attrs:{src:a("b32a"),alt:"删除民警人脸照片"},on:{click:e.deletePoliceFace}})]):t("div",{staticClass:"face-upload"},[t("input",{attrs:{type:"file",accept:"image/*"},on:{input:e.uploadPoliceFace}}),t("img",{attrs:{src:a("894f"),alt:"上传民警人脸照片"}}),t("span",[e._v("请上传民警人脸照片")])])]),t("div",{staticClass:"face-prisoner"},[e.prisonerFaceState?t("div",{staticClass:"face-box"},[t("img",{staticClass:"face-image",attrs:{src:e.prisonerFaceUrl,title:"在押人员人脸照片",alt:"在押人员人脸照片"}}),t("img",{staticClass:"face-delete",attrs:{src:a("b32a"),alt:"删除在押人员人脸照片"},on:{click:e.deletePrisonerFace}})]):t("div",{staticClass:"face-upload"},[t("input",{attrs:{type:"file",accept:"image/*"},on:{input:e.uploadPrisonerFace}}),t("img",{attrs:{src:a("894f"),alt:"上传在押人员人脸照片"}}),t("span",[e._v("请上传在押人员人脸照片")])])])]),t("div",{staticClass:"face-submit"},[t("div",{staticClass:"number-box"},[e.policeNum?t("div",[e._v("民警编号："+e._s(e.policeNum))]):e._e(),e.prisonerNum?t("div",[e._v("在押人员编号："+e._s(e.prisonerNum))]):e._e(),e.faceTestState?t("div",[e._v(e._s(e.faceTestContent))]):e._e()]),t("div",{staticClass:"button-box"},[t("div",{staticClass:"confirm-button",on:{click:e.submitFaceTest}},[e._v("确定")]),t("div",{staticClass:"clear-button",on:{click:e.clearFaceTest}},[e._v("清空")])])])]):e._e(),t("div",{staticClass:"debug-tool-step step-one"},[t("label",[e._v("【第一步】选择设备：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.controlCode,expression:"controlCode"}],attrs:{type:"text",placeholder:"搜索主机"},domProps:{value:e.controlCode},on:{input:function(t){t.target.composing||(e.controlCode=t.target.value)}}}),t("button",{on:{click:e.getControlInfo}},[e._v("查询主机列表")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.terminalCode,expression:"terminalCode"}],attrs:{type:"text",placeholder:"搜索分机"},domProps:{value:e.terminalCode},on:{input:function(t){t.target.composing||(e.terminalCode=t.target.value)}}}),t("button",{on:{click:e.getTerminalInfo}},[e._v("查询分机列表")])]),t("div",{staticClass:"debug-tool-step"},[t("div",{staticClass:"step-header"},[t("label",[e._v("【第二步】")]),t("button",{on:{click:e.getCommandList}},[e._v("获取指令编号")]),t("label",[e._v("输入指令编号：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.commandCode,expression:"commandCode"}],attrs:{type:"text",placeholder:"请输入指令编号"},domProps:{value:e.commandCode},on:{input:function(t){t.target.composing||(e.commandCode=t.target.value)}}}),t("label",[e._v("参数(extend)：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.commandContent,expression:"commandContent"}],attrs:{type:"text",placeholder:"请输入参数"},domProps:{value:e.commandContent},on:{input:function(t){t.target.composing||(e.commandContent=t.target.value)}}})]),t("div",{staticClass:"step-header"},[t("label",[e._v("【第三步】发送指令：")]),t("button",{on:{click:e.sendCommand}},[e._v("发送指令")])]),t("div",{staticClass:"debug-tool-content"},[t("div",{staticClass:"debug-tool-left"},[t("div",{staticClass:"command-content"},e._l(e.commandList,(function(a,s){return t("div",{key:s,staticClass:"command-item"},[t("span",[e._v(e._s(`【${a.id}】`)+e._s(a.content))])])})),0)]),t("div",{staticClass:"debug-tool-right"},[e.controlList.length?t("div",{staticClass:"debug-tool-table"},[t("div",{staticClass:"table-title"},[e._v(e._s(e.tableTitle)),t("span",[e._v(e._s(`【所有主机：${e.searchTotal}】`))]),e.selectedNum?t("span",[e._v(e._s(`【已选主机：${e.selectedNum}】`))]):e._e()]),t("el-table",{attrs:{border:"",stripe:"",size:"mini",data:e.controlList,"highlight-current-row":"","max-height":"500","header-cell-class-name":e.tableHeaderClass,"cell-class-name":e.tableCellClass},on:{"selection-change":e.selectControl}},[t("el-table-column",{attrs:{align:"center",type:"selection",width:"100",selectable:e.controlSelectable}}),t("el-table-column",{attrs:{align:"center",label:"在线状态",prop:"status",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"主机编号",prop:"controlCode",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"主机名称",prop:"controlName",width:"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"主机IP",prop:"controlIp",width:"200"}}),t("el-table-column",{attrs:{align:"center",label:"APP版本",prop:"version",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"父级主机编号",prop:"conParentCode",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"父级主机名称",prop:"conParentName",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"单位名称",prop:"areaName",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"是否启用",prop:"isEnable",width:"150"}})],1)],1):e._e(),e.terminalList.length?t("div",{staticClass:"debug-tool-table"},[t("div",{staticClass:"table-title"},[e._v(e._s(e.tableTitle)),t("span",[e._v(e._s(`【所有分机：${e.searchTotal}】`))]),e.selectedNum?t("span",[e._v(e._s(`【已选分机：${e.selectedNum}】`))]):e._e()]),t("el-table",{attrs:{border:"",stripe:"",size:"mini",data:e.terminalList,"highlight-current-row":"","max-height":"500","header-cell-class-name":e.tableHeaderClass,"cell-class-name":e.tableCellClass},on:{"selection-change":e.selectTerminal}},[t("el-table-column",{attrs:{align:"center",type:"selection",width:"100",selectable:e.terminalSelectable}}),t("el-table-column",{attrs:{align:"center",label:"在线状态",prop:"status",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"分机编号",prop:"terminalCode",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"分机名称",prop:"terminalName",width:"250","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"分机IP",prop:"terminalIp",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"APP版本",prop:"version",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"主机编号",prop:"controlCode",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"主机名称",prop:"controlName",width:"150","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"监室ID",prop:"roomId",width:"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{align:"center",label:"监室名称",prop:"roomName",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"监区名称",prop:"areaName",width:"150"}}),t("el-table-column",{attrs:{align:"center",label:"是否启用",prop:"isEnable",width:"150"}})],1)],1):e._e()])])])])])])},n=[],r=a("4ff3"),c=a.n(r);let p={dev:"",pro:""};const d=p.pro;var m=d,h=a("23c5"),u=a.n(h);const g=c.a.create({baseURL:m.baseUrl});g.interceptors.request.use(e=>e,e=>Promise.reject(e)),g.interceptors.response.use(e=>{let t=e.data;return"200"==t.state.code?t:(Object(h["Message"])({title:"提示",message:"请检查服务器IP或端口是否填写正确",type:"error"}),Promise.reject())},e=>Promise.reject(e));var b=g;function f(e){return b({url:e+"/terminal/testing/test",method:"get"})}function v(e){return b({url:e+"/terminal/testing/getUpdateInfo",method:"get"})}function C(e,t){return b({url:e+"/terminal/testing/getControlList",method:"post",data:t})}function w(e,t){return b({url:e+"/terminal/testing/getTerminalList",method:"post",data:t})}function _(e){return b({url:e+"/terminal/testing/getCommandInfo",method:"get"})}function F(e,t){return b({url:e+"/terminal/testing/sendCommand",method:"post",data:t})}function y(e,t){return b({url:e+"/terminal/faceRecognition/faceComparTest",method:"post",data:t})}const T={serverIp:window.g.serverIp,port:window.g.port};var N=T,P={name:"DebugTool",data(){return{serverIp:N.serverIp,port:N.port,controlCode:"",terminalCode:"",commandCode:"",commandContent:"",commandList:[],appVersion:"",tableTitle:"",controlList:[],terminalList:[],controlNo:"",terminalNo:"",selectedNum:0,searchTotal:0,showFaceTest:!1,policeFaceState:!1,prisonerFaceState:!1,policeFaceUrl:"",prisonerFaceUrl:"",policeNum:"",prisonerNum:"",faceTestState:!1,faceTestContent:""}},computed:{apiUrl(){return`http://${this.serverIp}:${this.port}`}},methods:{handleTestApi(){this.serverIp?this.port?f(this.apiUrl).then(e=>{"200"==e.state.code&&(this.appVersion="",this.$message({message:"接口连接成功",type:"success",offset:"150"}))},e=>{this.appVersion="请检查服务器IP或端口是否填写正确!",this.$message({message:"接口连接失败",type:"error"}),this.commandList=[],this.controlList=[],this.terminalList=[]}):this.$message({message:"请输入端口号",type:"warning"}):this.$message({message:"请输入服务器IP",type:"warning"})},toggleTestFace(){this.showFaceTest=!this.showFaceTest},uploadPoliceFace(e){let t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onload=e=>{this.policeFaceState=!0,this.policeFaceUrl=e.target.result}},uploadPrisonerFace(e){let t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onload=e=>{this.prisonerFaceState=!0,this.prisonerFaceUrl=e.target.result}},deletePoliceFace(){this.$confirm("是否删除民警人脸照片？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.policeFaceUrl="",this.policeNum="",this.faceTestContent="",this.faceTestState=!1,this.policeFaceState=!1}).catch(()=>{})},deletePrisonerFace(){this.$confirm("是否删除在押人员人脸照片？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.prisonerFaceUrl="",this.prisonerNum="",this.faceTestContent="",this.faceTestState=!1,this.prisonerFaceState=!1}).catch(()=>{})},clearFaceTest(){this.policeFaceUrl="",this.policeNum="",this.prisonerFaceUrl="",this.prisonerNum="",this.faceTestContent="",this.faceTestState=!1,this.policeFaceState=!1,this.prisonerFaceState=!1},submitFaceTest(){let e=[this.policeFaceUrl,this.prisonerFaceUrl];if(e.every(e=>!e))this.$message({message:"请先上传人脸照片！",type:"warning"});else if(this.policeFaceUrl&&!this.prisonerFaceUrl){let e=this.policeFaceUrl.substr(this.policeFaceUrl.indexOf(",")+1),t={data:{faceType:0,img1:e,img2:""}};this.handleFaceCompare(0,t)}else if(this.prisonerFaceUrl&&!this.policeFaceUrl){let e=this.prisonerFaceUrl.substr(this.prisonerFaceUrl.indexOf(",")+1),t={data:{faceType:1,img1:e,img2:""}};this.handleFaceCompare(1,t)}else{let e=this.policeFaceUrl.substr(this.policeFaceUrl.indexOf(",")+1),t=this.prisonerFaceUrl.substr(this.prisonerFaceUrl.indexOf(",")+1),a={data:{faceType:2,img1:e,img2:t}};this.handleFaceCompare(2,a)}},handleFaceCompare(e,t){y(this.apiUrl,t).then(t=>{if("200"==t.state.code)if(2==e)this.policeNum="",this.prisonerNum="",this.faceTestState=!0,t.data.score>=.8?this.faceTestContent="人脸比对成功！比对值："+t.data.score:this.faceTestContent="人脸比对失败！比对值："+t.data.score;else if(t.data.hasOwnProperty("rybh"))switch(e){case 0:this.policeNum=t.data.rybh;break;case 1:this.prisonerNum=t.data.rybh;break}else this.$message({message:"无该人员！",type:"warning"})}).catch(()=>{this.$message({message:"无该人员！",type:"warning"})})},getAppVersion(){v(this.apiUrl).then(e=>{if("200"==e.state.code)if(Object.keys(e.data).length){let t=e.data.control?`【主机：V${e.data.control.versionName}】`:"",a=e.data.terminal?`【仓内屏：V${e.data.terminal.versionName}】`:"",s=e.data.manager?`【仓外屏：V${e.data.manager.versionName}】`:"";this.appVersion=`${t}${a}${s}`}else this.appVersion="暂无数据"},e=>{this.appVersion="请检查服务器IP或端口是否填写正确!",this.commandList=[],this.controlList=[],this.terminalList=[]})},getControlInfo(){this.controlNo="",this.terminalNo="",this.selectedNum=0,this.searchTotal=0,this.controlList=[],this.terminalList=[];let e={data:{keyword:this.controlCode}};C(this.apiUrl,e).then(e=>{if("200"==e.state.code){this.tableTitle="主机列表",this.searchTotal=e.data.length;let t=e.data;t.length&&t.map(e=>{e.status=e.status?"在线":"离线",e.isEnable=e.isEnable?"启用":"未启用"}),this.controlList=t}})},getTerminalInfo(){this.controlNo="",this.terminalNo="",this.selectedNum=0,this.searchTotal=0,this.controlList=[],this.terminalList=[];let e={data:{keyword:this.terminalCode}};w(this.apiUrl,e).then(e=>{if("200"==e.state.code){this.tableTitle="分机列表",this.searchTotal=e.data.length;let t=e.data;t.length&&t.map(e=>{e.status=e.status?"在线":"离线",e.isEnable=e.isEnable?"启用":"未启用"}),this.terminalList=t}})},getCommandList(){this.commandList=[],_(this.apiUrl).then(e=>{"200"==e.state.code&&(this.commandList=e.data)},e=>{this.$message({message:"请检查服务器IP或端口是否填写正确!",type:"error"})})},controlSelectable(e){return"在线"==e.status},terminalSelectable(e){return"在线"==e.status},selectControl(e){this.selectedNum=e.length,this.controlNo=e.map(e=>e.controlCode).join(",")},selectTerminal(e){this.selectedNum=e.length,this.terminalNo=e.map(e=>e.terminalCode).join(",")},sendCommand(){if(this.controlList.length||this.terminalList.length)if(this.commandCode)if(!this.controlList.length||this.controlNo)if(!this.terminalList.length||this.terminalNo){if(this.controlList.length&&this.controlNo){let e={data:{command:this.commandCode,devNo:this.controlNo,extend:this.commandContent}};F(this.apiUrl,e).then(e=>{"200"==e.state.code&&this.$message({message:"指令发送成功",type:"success"})})}if(this.terminalList.length&&this.terminalNo){let e={data:{command:this.commandCode,devNo:this.terminalNo,extend:this.commandContent}};F(this.apiUrl,e).then(e=>{"200"==e.state.code&&this.$message({message:"指令发送成功",type:"success"})})}}else this.$message({message:"请选择分机列表",type:"warning"});else this.$message({message:"请选择主机列表",type:"warning"});else this.$message({message:"请输入命令编号",type:"warning"});else this.$message({message:"请先查询设备列表",type:"warning"})},tableHeaderClass(e){return"table-header"},tableCellClass(e){return"在线"==e.row.status?"cell-online":0==e.row.netStatus?"net-offline":"table-cell"}}},x=P,U=(a("372a"),a("e607")),L=Object(U["a"])(x,o,n,!1,null,null,null),$=L.exports,I={name:"App",components:{DebugTool:$}},S=I,k=(a("d8c5"),Object(U["a"])(S,l,i,!1,null,null,null)),O=k.exports;a("4ee2"),a("752d");s["default"].use(u.a),s["default"].config.productionTip=!1,new s["default"]({render:e=>e(O)}).$mount("#app")},5746:function(e,t,a){},"894f":function(e,t,a){e.exports=a.p+"img/upload.65f8b05c.png"},b32a:function(e,t,a){e.exports=a.p+"img/delete.a20ff353.png"},d8c5:function(e,t,a){"use strict";a("5746")}});